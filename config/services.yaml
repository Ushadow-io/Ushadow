# External Service Configurations
# This file defines external services that can be integrated with Ushadow

services:
  - service_id: openmemory
    name: "OpenMemory"
    description: "Semantic memory with knowledge graphs (mem0-based)"
    service_type: memory_source
    integration_type: rest
    enabled: true
    
    connection:
      url: "http://u-mem0-api:8765"
      timeout: 30
      auth:
        method: none
      
      # mem0 API uses /api/v1/ prefix
      list_endpoint: "/api/v1/memories/"
      detail_endpoint: "/api/v1/memories/{id}/"
      
      query_params:
        user_id: "ushadow"
    
    memory_mapping:
      field_mappings:
        # OpenMemory uses "content" not "memory"
        - source_field: "content"
          target_field: "content"
        
        # Use content as title (will be truncated in UI)
        - source_field: "content"
          target_field: "title"
        
        # OpenMemory auto-generates categories
        - source_field: "categories"
          target_field: "tags"
        
        # Preserve timestamps
        - source_field: "created_at"
          target_field: "created_at"
        
        # Source ID for deduplication
        - source_field: "id"
          target_field: "source_id"
      
      include_unmapped: true
    
    sync_interval: 1800
    tags:
      - memory
      - semantic
      - knowledge-graph

# Add more services here as list items with "- service_id: ..."

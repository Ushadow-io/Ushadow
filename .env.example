# Ushadow Environment Configuration Template
# Copy this file to .env and customize for your environment
# DO NOT COMMIT .env - it contains environment-specific configuration

# ==========================================
# ENVIRONMENT & PROJECT NAMING
# ==========================================
ENV_NAME=ushadow
COMPOSE_PROJECT_NAME=ushadow

# ==========================================
# PORT CONFIGURATION
# ==========================================
PORT_OFFSET=10
BACKEND_PORT=8010
WEBUI_PORT=3010

# ==========================================
# DATABASE ISOLATION
# ==========================================
MONGODB_DATABASE=ushadow
REDIS_DATABASE=0

# ==========================================
# CORS & FRONTEND CONFIGURATION
# ==========================================
CORS_ORIGINS=http://localhost:3010,http://127.0.0.1:3010,http://localhost:8010,http://127.0.0.1:8010
VITE_BACKEND_URL=http://localhost:8010
VITE_ENV_NAME=ushadow
HOST_IP=localhost

# Development mode
DEV_MODE=true

# ==========================================
# SHARE LINK CONFIGURATION
# ==========================================
# Base URL for share links (highest priority if set)
# SHARE_BASE_URL=https://ushadow.tail12345.ts.net

# Public gateway URL for external friend sharing (requires share-gateway deployment)
# SHARE_PUBLIC_GATEWAY=https://share.yourdomain.com

# Share feature toggles
SHARE_VALIDATE_RESOURCES=false  # Enable strict resource validation
SHARE_VALIDATE_TAILSCALE=false  # Enable Tailscale IP validation

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# SECURITY: Change these defaults in production!

POSTGRES_DB=ushadow


# ==========================================
# KEYCLOAK CONFIGURATION
# ==========================================
# SECURITY: Change these defaults in production!
#
# These env vars serve dual purpose:
# 1. Deployment overrides: config.defaults.yaml reads from env vars via OmegaConf interpolation
# 2. Container config: Keycloak container uses KEYCLOAK_ADMIN* and port mappings
# 3. Setup script: run.py writes KEYCLOAK_ADMIN_PASSWORD to secrets.yaml

# Internal Docker network URL (backend → Keycloak)
KEYCLOAK_URL=http://keycloak:8080

# External browser URL (frontend → Keycloak)
KEYCLOAK_EXTERNAL_URL=http://localhost:8081

# Keycloak realm and client configuration
KEYCLOAK_REALM=ushadow
KEYCLOAK_CLIENT_ID=ushadow-frontend
KEYCLOAK_CLIENT_SECRET=

# Keycloak admin credentials
# set by run.py during setup

# Keycloak container ports
KEYCLOAK_PORT=8081
KEYCLOAK_MGMT_PORT=9000

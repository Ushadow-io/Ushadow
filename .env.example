# Ushadow Environment Configuration Template
# Copy this file to .env and customize for your environment
# DO NOT COMMIT .env - it contains environment-specific configuration

# ==========================================
# ENVIRONMENT & PROJECT NAMING
# ==========================================
ENV_NAME=ushadow
COMPOSE_PROJECT_NAME=ushadow

# ==========================================
# PORT CONFIGURATION
# ==========================================
PORT_OFFSET=10
BACKEND_PORT=8010
WEBUI_PORT=3010

# ==========================================
# DATABASE ISOLATION
# ==========================================
MONGODB_DATABASE=ushadow
REDIS_DATABASE=0

# ==========================================
# CORS & FRONTEND CONFIGURATION
# ==========================================
CORS_ORIGINS=http://localhost:3010,http://127.0.0.1:3010,http://localhost:8010,http://127.0.0.1:8010
VITE_BACKEND_URL=http://localhost:8010
VITE_ENV_NAME=ushadow
HOST_IP=localhost

# Development mode
DEV_MODE=true

# ==========================================
# SHARE LINK CONFIGURATION
# ==========================================
# Base URL for share links (highest priority if set)
# SHARE_BASE_URL=https://ushadow.tail12345.ts.net

# Public gateway URL for external friend sharing (requires share-gateway deployment)
# SHARE_PUBLIC_GATEWAY=https://share.yourdomain.com

# Share feature toggles
SHARE_VALIDATE_RESOURCES=false  # Enable strict resource validation
SHARE_VALIDATE_TAILSCALE=false  # Enable Tailscale IP validation

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# SECURITY: Change these defaults in production!

POSTGRES_DB=ushadow


# ==========================================
# KEYCLOAK CONFIGURATION
# ==========================================
# SECURITY: Change these defaults in production!
#
# KC_ prefix = Keycloak's native env var format, read directly by OmegaConf.
# Note: The Keycloak container itself still uses KEYCLOAK_ADMIN/KEYCLOAK_ADMIN_PASSWORD
# internally (set by docker-compose.infra.yml from KC_BOOTSTRAP_ADMIN_* vars).

# Internal Docker network URL (backend â†’ Keycloak admin API)
KC_URL=http://keycloak:8080

# Public URL for browser/web clients (OAuth redirects, token issuer)
# IMPORTANT: Set to your Tailscale hostname for remote access
# e.g., https://orange.spangled-kettle.ts.net
KC_HOSTNAME_URL=http://localhost:8081

# Mobile-specific URL (Tailscale - phone cannot use localhost)
# Set to Tailscale hostname so the phone can reach Keycloak
# If empty, mobile falls back to KC_HOSTNAME_URL
KC_MOBILE_URL=

# Keycloak realm and client configuration
KC_REALM=ushadow
KC_FRONTEND_CLIENT_ID=ushadow-frontend
KC_BACKEND_CLIENT_ID=ushadow-backend
KC_CLIENT_SECRET=

# Keycloak admin credentials
KC_BOOTSTRAP_ADMIN_USERNAME=admin
KC_BOOTSTRAP_ADMIN_PASSWORD=admin

# Keycloak container ports
KC_PORT=8081
KC_MGMT_PORT=9000

# ==========================================
# KUBERNETES CONFIGURATION
# ==========================================
# Container registry for Kubernetes deployments
# Used by: Kustomize, build scripts, k8s manifests
# Examples:
#   - Docker Hub: docker.io/yourorg
#   - Private registry: registry.example.com:5000
#   - Local registry: localhost:5000
K8S_REGISTRY=your-registry:5000
REPOSITORY_URL=your-registry:5000  # Alias for compatibility

# Kubernetes namespace for deployments (default: ushadow)
# Each namespace gets isolated config PVC: {namespace}-config
# K8S_NAMESPACE=ushadow

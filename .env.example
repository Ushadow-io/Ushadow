# Ushadow Environment Configuration Template
# Copy this file to .env and customize for your environment
# DO NOT COMMIT .env - it contains environment-specific configuration

# ==========================================
# ENVIRONMENT & PROJECT NAMING
# ==========================================
ENV_NAME=ushadow
COMPOSE_PROJECT_NAME=ushadow

# ==========================================
# PORT CONFIGURATION
# ==========================================
PORT_OFFSET=10
BACKEND_PORT=8010
WEBUI_PORT=3010

# ==========================================
# DATABASE ISOLATION
# ==========================================
MONGODB_DATABASE=ushadow
REDIS_DATABASE=0

# ==========================================
# CORS & FRONTEND CONFIGURATION
# ==========================================
CORS_ORIGINS=http://localhost:3010,http://127.0.0.1:3010,http://localhost:8010,http://127.0.0.1:8010
VITE_BACKEND_URL=http://localhost:8010
VITE_ENV_NAME=ushadow
HOST_IP=localhost

# Development mode
DEV_MODE=true

# ==========================================
# SHARE LINK CONFIGURATION
# ==========================================
# Base URL for share links (highest priority if set)
# SHARE_BASE_URL=https://ushadow.tail12345.ts.net

# Public gateway URL for external friend sharing (requires share-gateway deployment)
# SHARE_PUBLIC_GATEWAY=https://share.yourdomain.com

# Share feature toggles
SHARE_VALIDATE_RESOURCES=false  # Enable strict resource validation
SHARE_VALIDATE_TAILSCALE=false  # Enable Tailscale IP validation

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# SECURITY: Change these defaults in production!

POSTGRES_DB=ushadow


# ==========================================
# KEYCLOAK CONFIGURATION
# ==========================================
# SECURITY: Change these defaults in production!
#
# These env vars serve dual purpose:
# 1. Deployment overrides: config.defaults.yaml reads KC_* vars via OmegaConf interpolation
# 2. Container config: Keycloak container uses KEYCLOAK_ADMIN* and port mappings
# 3. Setup script: run.py writes KEYCLOAK_ADMIN_PASSWORD to secrets.yaml

# Internal Docker network URL (backend → Keycloak admin API)
KEYCLOAK_URL=http://keycloak:8080

# External browser URL (frontend → Keycloak login page)
# IMPORTANT: Change for Tailscale domains (e.g., https://keycloak.chakra)
KEYCLOAK_EXTERNAL_URL=http://localhost:8081

# Keycloak realm and client configuration
KEYCLOAK_REALM=ushadow
KEYCLOAK_CLIENT_ID=ushadow-frontend
KEYCLOAK_CLIENT_SECRET=

# Keycloak admin credentials (auto-set by run.py to secrets.yaml)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Keycloak container ports
KEYCLOAK_PORT=8081
KEYCLOAK_MGMT_PORT=9000

# ==========================================
# KUBERNETES CONFIGURATION
# ==========================================
# Container registry for Kubernetes deployments
# Used by: Kustomize, build scripts, k8s manifests
# Examples:
#   - Docker Hub: docker.io/yourorg
#   - Private registry: registry.example.com:5000
#   - Local registry: localhost:5000
K8S_REGISTRY=your-registry:5000
REPOSITORY_URL=your-registry:5000  # Alias for compatibility

# Kubernetes namespace for deployments (default: ushadow)
# Each namespace gets isolated config PVC: {namespace}-config
# K8S_NAMESPACE=ushadow

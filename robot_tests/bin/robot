#!/bin/bash
# Robot wrapper that loads test environment variables
# This is found first in PATH by VSCode RobotCode extension
# Container startup is handled by suite_setup.robot (oldtests pattern)

set -e

# Get the robot_tests directory (parent of bin/)
ROBOT_TESTS_DIR="$(cd "$(dirname "$0")/.." && pwd)"
cd "$ROBOT_TESTS_DIR"

# Load test environment variables if available
if [ -f ".env.test" ]; then
    export $(cat .env.test | grep -v '^#' | xargs)
fi

# Call the real robot command (pixi installation)
exec /Users/stu/.local/bin/robot "$@"
